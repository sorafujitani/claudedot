# PR Review & Documentation Generator

PRの変更内容を分析し、実装の理解に必要な情報を包括的にまとめます。

## 入力

$ARGUMENTS: PR番号またはPR URL（例: 123 または https://github.com/owner/repo/pull/123）

## 実行手順

### 1. PR情報の取得

```bash
gh pr view $ARGUMENTS --json title,body,files,additions,deletions,baseRefName,headRefName,author,url
```

PRの差分も取得:
```bash
gh pr diff $ARGUMENTS
```

### 2. 分析と出力

以下の構成でレビュードキュメントを生成してください：

---

## 📋 PR概要

| 項目 | 内容 |
|------|------|
| タイトル | {PRタイトル} |
| 作成者 | {author} |
| ブランチ | {headRefName} → {baseRefName} |
| 変更規模 | +{additions} / -{deletions} 行 |
| URL | {PR URL} |

## 🏗️ アーキテクチャ概要

このPRが関わるシステムアーキテクチャを説明:
- 関連するレイヤー（Controller / UseCase / Repository / Entity など）
- データフローの概要
- 依存関係の図解（必要に応じてMermaid図を使用）

## 📁 変更ファイル一覧

各ファイルの役割と変更概要を表形式で記載:

| ファイル | 役割 | 変更内容 |
|----------|------|----------|
| ... | ... | ... |

## 🔍 実装詳細

### 主要な変更点

変更の目的と実装方法を詳細に説明。コードの重要な部分を引用しながら解説。

### データ構造

新規または変更されたデータ構造（DTO, Entity, 型定義など）を説明:

```typescript
// 例: 新しく追加された型
interface Example {
  // ...
}
```

### 処理フロー

主要な処理フローをステップバイステップで説明。必要に応じてシーケンス図を含める。

## 📚 基礎知識・リファレンス

このPRを理解するために必要な技術や概念:

### 使用技術・パターン

- **技術名**: 簡潔な説明
  - 公式ドキュメント: [リンク](URL)
  - 関連する概念や用語の説明

### 関連するコードベースの知識

- プロジェクト固有のパターンや規約
- 既存の類似実装への参照

## ⚠️ 問題点・懸念事項

発見された潜在的な問題:

### 🔴 重大な問題（修正必須）

- 問題の説明
  - 影響範囲
  - 推奨される修正方法

### 🟡 軽微な問題（修正推奨）

- 問題の説明
  - 改善案

### 🟢 提案・改善案

- コードの可読性向上
- パフォーマンス改善の余地
- テストカバレッジの向上

## ✅ レビューチェックリスト

- [ ] ロジックの正確性
- [ ] エラーハンドリング
- [ ] エッジケースの考慮
- [ ] セキュリティ（SQLインジェクション、XSSなど）
- [ ] パフォーマンス
- [ ] テストの網羅性
- [ ] ドキュメント・コメントの適切さ
- [ ] 命名規則・コーディング規約の遵守

## 💬 総評

PRの全体的な評価と、レビュアーとしての所見をまとめる。

---

## 注意事項

- コードを読む際は、変更されたファイルだけでなく関連するファイルも確認すること
- 公式ドキュメントのリンクは最新版を参照すること
- 問題点の指摘には必ず改善案を添えること
- 良い実装には積極的に言及すること
